name: Docker Image fly.io Deploy.

on:
  workflow_dispatch:
    inputs:
      fly_toml:
        required: true
        type: string
      authentication_config_yml:
        required: true
        type: string

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Install fly.io
      run: curl -L https://fly.io/install.sh | sh
    - name: fly.io 
      run: /home/runner/.fly/bin/flyctl version
    - name: fly.io Authentication
      run: |
        cat <<EOF > /home/runner/.fly/config.yml
        ${{ inputs.config_content }}
        EOF
    - name: config.yml
      run: cat /home/runner/.fly/config.yml
    - name: Auth Whoami
      run: /home/runner/.fly/bin/flyctl auth whoami
